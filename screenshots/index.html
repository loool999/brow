
        <!DOCTYPE html>
        <html>
        <head>
            <title>Browser Screenshots</title>
            <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                h1 { color: #333; }
                .screenshot { 
                    margin-bottom: 30px; 
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                }
                .screenshot img { 
                    max-width: 100%;
                    border: 1px solid #eee;
                }
                .timestamp { 
                    color: #666; 
                    font-size: 0.8em;
                    margin-bottom: 5px;
                }
        .control-panel {
            margin: 20px auto;
            text-align: center;
        }
        .scroll-buttons {
            margin-top: 10px;
        }
    </style>
    <script>
        // Refresh the live view image every 100ms
        function refreshImage() {
            const img = document.getElementById('live-image');
            img.src = 'live_view.png?t=' + new Date().getTime();
        }
        setInterval(refreshImage, 100);

        // Handle clicks on the image
        function handleClick(event) {
            const img = document.getElementById('live-image');
            const rect = img.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            const scaleX = img.naturalWidth / rect.width;
            const scaleY = img.naturalHeight / rect.height;
            const actualX = Math.round(x * scaleX);
            const actualY = Math.round(y * scaleY);
            fetch(`/click?x=${actualX}&y=${actualY}`);
        }

        // Handle scrolling (simulated with buttons)
        function scroll(direction, amount) {
            fetch(`/scroll?direction=${direction}&amount=${amount}`);
        }

        // Handle key presses
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            fetch(`/type?key=${encodeURIComponent(key)}`);
        });

        // Attach click handler when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            const img = document.getElementById('live-image');
            img.addEventListener('click', handleClick);
        });
    </script>
</head>
<body>
    <h1>Browser Live View</h1>
    <div class="control-panel">
        <form action="/navigate" method="get">
            <input type="text" name="url" placeholder="Enter URL" style="width: 300px;">
            <button type="submit">Go</button>
        </form>
        <button onclick="location.href='/switch_tab?direction=prev'">Previous Tab</button>
        <button onclick="location.href='/switch_tab?direction=next'">Next Tab</button>
        <div class="scroll-buttons">
            <button onclick="scroll('up', 100)">Scroll Up</button>
            <button onclick="scroll('down', 100)">Scroll Down</button>
        </div>
    </div>
    <div class="live-view">
        <img id="live-image" src="live_view.png" alt="Live Browser View">
    </div>
    <p class="refresh-note">
        <span class="auto-refresh">Auto-refreshing</span> every 100ms
    </p>
</body>
</html>
        